{% extends 'main/base.html' %}{% block content %}<div class="container py-5">    <h2 class="mb-4">Donnez votre avis</h2>{% if messages %}    {% for message in messages %}        <div class="alert alert-success">{{ message }}</div>    {% endfor %}{% endif %}    <form method="POST" class="mb-4">        {% csrf_token %}        <div class="mb-3">            {{ form.nom.label_tag }}            {{ form.nom }}        </div>        <div class="mb-3">            {{ form.commentaire.label_tag }}            {{ form.commentaire }}        </div>        <!-- Étoiles cliquables (inline style) -->        <div class="mb-3">            <label class="form-label">Votre note :</label><br>            <div style="direction: rtl; display: inline-flex; gap: 5px;">                {% for i in "54321" %}                    <input type="radio" name="note" id="star{{ i }}" value="{{ i }}" {% if form.note.value == i %}checked{% endif %} style="display: none;">                    <label for="star{{ i }}" style="font-size: 1.8rem; color: {% if form.note.value >= i %}gold{% else %}lightgray{% endif %}; cursor: pointer;">★</label>                {% endfor %}            </div>        </div>        <button type="submit" class="btn btn-primary">Envoyer</button>    </form>    <hr>    <h3 class="mb-3">Avis reçus</h3>    <form method="GET" class="mb-3">        <label for="note">Filtrer par note :</label>        <select name="note" id="note" onchange="this.form.submit()" class="form-select w-auto d-inline-block">            <option value="">Toutes</option>            {% for i in "12345" %}                <option value="{{ i }}" {% if note_filter == i %}selected{% endif %}>{{ i }} étoiles</option>            {% endfor %}        </select>    </form>    {% for avis in avis_liste %}        <div class="border rounded p-3 mb-3">            <strong>{{ avis.nom }}</strong> —            {% for i in "12345" %}                {% if avis.note|add:"0" >= i|add:"0" %}                    <span style="color: gold;">★</span>                {% else %}                    <span style="color: lightgray;">★</span>                {% endif %}            {% endfor %}            <br>            <small class="text-muted">{{ avis.date|date:"d/m/Y H:i" }}</small>            <p class="mt-2">{{ avis.commentaire }}</p>        </div>    {% empty %}        <p>Aucun avis pour le moment.</p>    {% endfor %}</div><script>document.addEventListener('DOMContentLoaded', function () {    const labels = document.querySelectorAll('label[for^="star"]');    let selectedValue = document.querySelector('input[name="note"]:checked')?.value || null;    labels.forEach(label => {        const input = document.getElementById(label.getAttribute('for'));        const value = parseInt(label.getAttribute('for').replace('star', ''));        label.addEventListener('mouseover', () => highlightStars(value));        label.addEventListener('mouseout', () => highlightStars(selectedValue));        label.addEventListener('click', () => {            selectedValue = value;            highlightStars(value);        });    });    function highlightStars(value) {        labels.forEach(label => {            const starValue = parseInt(label.getAttribute('for').replace('star', ''));            label.style.color = starValue <= value ? 'gold' : 'lightgray';        });    }    if (selectedValue) {        highlightStars(parseInt(selectedValue));    }});</script>{% endblock %}