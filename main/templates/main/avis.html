{% extends 'main/base.html' %}{% block content %}<div class="container py-5">    <!-- Titre -->    <h2 class="text-center mb-5">‚≠ê Donnez votre avis</h2>    <!-- Message de succ√®s -->    {% if messages %}        {% for message in messages %}            <div class="alert alert-success text-center">{{ message }}</div>        {% endfor %}    {% endif %}<!-- FORMULAIRE D'AVIS ENCADR√â --><div class="row justify-content-center mb-5">    <div class="col-lg-8">        <div class="card border-0 shadow-sm">            <div class="card-header bg-primary text-white text-center py-3 rounded-top">                <h4 class="mb-0">Laissez un avis</h4>            </div>            <div class="card-body p-4">                <form method="POST">                    {% csrf_token %}                    <!-- Champ Nom -->                    <div class="mb-3">                        <label class="form-label">Votre pr√©nom :</label>                        {{ form.nom }}                    </div>                    <!-- Champ Commentaire -->                    <div class="mb-3">                        <label class="form-label">Votre avis :</label>                        {{ form.commentaire }}                    </div>                    <!-- √âtoiles not√©es -->                    <div class="mb-4 text-center">                        <label class="form-label d-block mb-2">Votre note :</label>                        <div style="direction: rtl; display: inline-flex; gap: 6px;">                            {% for i in "54321" %}                                <input type="radio" name="note" id="star{{ i }}" value="{{ i }}" {% if form.note.value == i %}checked{% endif %} style="display: none;">                                <label for="star{{ i }}" style="font-size: 2rem; color: {% if form.note.value >= i %}gold{% else %}lightgray{% endif %}; cursor: pointer;">‚òÖ</label>                            {% endfor %}                        </div>                    </div>                    <!-- Bouton envoyer -->                    <div class="text-center">                        <button type="submit" class="btn btn-primary px-5 py-2 rounded-pill shadow">Envoyer mon avis</button>                    </div>                </form>            </div>        </div>    </div></div>    <!-- Avis re√ßus -->    <h3 class="mb-4 text-center">üì¢ Avis re√ßus</h3>    <!-- Filtre -->    <form method="GET" class="d-flex justify-content-center mb-4">        <label for="note" class="me-2 mt-1">Filtrer par note :</label>        <select name="note" id="note" onchange="this.form.submit()" class="form-select w-auto">            <option value="">Toutes</option>            {% for i in "12345" %}                <option value="{{ i }}" {% if note_filter == i %}selected{% endif %}>{{ i }} √©toiles</option>            {% endfor %}        </select>    </form>    {% if avis_liste %}        {% for avis in avis_liste %}            <div class="border rounded p-4 mb-4 shadow-sm">                <div class="d-flex justify-content-between align-items-center mb-2">                    <strong>{{ avis.nom }}</strong>                    <small class="text-muted">{{ avis.date|date:"d/m/Y H:i" }}</small>                </div>                <div class="mb-2">                    {% for i in "12345" %}                        {% if avis.note|add:"0" >= i|add:"0" %}                            <span style="color: gold; font-size: 1.2rem;">‚òÖ</span>                        {% else %}                            <span style="color: lightgray; font-size: 1.2rem;">‚òÖ</span>                        {% endif %}                    {% endfor %}                </div>                <p class="mb-0">{{ avis.commentaire }}</p>            </div>        {% endfor %}    {% else %}        <p class="text-center text-muted">Encore aucun avis. Soyez le premier √† en laisser un !</p>    {% endif %}</div><!-- Script √©toiles dynamiques --><script>document.addEventListener('DOMContentLoaded', function () {    const labels = document.querySelectorAll('label[for^="star"]');    let selectedValue = document.querySelector('input[name="note"]:checked')?.value || null;    labels.forEach(label => {        const value = parseInt(label.getAttribute('for').replace('star', ''));        label.addEventListener('mouseover', () => highlightStars(value));        label.addEventListener('mouseout', () => highlightStars(selectedValue));        label.addEventListener('click', () => {            selectedValue = value;            highlightStars(value);        });    });    function highlightStars(value) {        labels.forEach(label => {            const val = parseInt(label.getAttribute('for').replace('star', ''));            label.style.color = val <= value ? 'gold' : 'lightgray';        });    }    if (selectedValue) highlightStars(parseInt(selectedValue));});</script>{% endblock %}